import{r as l,j as e,F as k,_}from"./index-8f0c1633.js";import{f as P,u as M,a as E,b as $,c as z,d as V}from"./react-spring_web.modern-1c4e7015.js";function W({viewData:o}){const a="jac-mock-schedule-maker",[t,s]=l.useState(()=>{const i=window.localStorage.getItem(a);return i?JSON.parse(i):[]}),n=l.useRef(t.length),{chosenClasses:c}=l.useContext(v);function d(i){s([...t,{id:n.current,vData:i,data:c}]);do n.current+=1;while(t.map(x=>x.id).includes(n.current))}return l.useEffect(()=>{window.localStorage.setItem(a,JSON.stringify(t))},[t]),e.jsxs("section",{className:"md:row-span-1 md:col-span-full bg-c1 rounded-xl box-border flex max-md:order-1",children:[e.jsx("div",{className:"md:m-4 m-2 bg-c2 hover:bg-c3 active:bg-c4 transition rounded-md flex items-center justify-center md:p-4 p-2 cursor-pointer shrink-0",onClick:()=>d(o),children:e.jsx(k,{icon:P,className:"md:text-4xl text-xl"})}),e.jsx("div",{className:"flex gap-2 overflow-auto md:p-4 p-2 basis-full md:mr-4 mr-2",children:t.map(i=>e.jsx(Y,{i,savedSchedule:t,setSavedSchedule:s},i.id))})]})}function B({blocksToShow:o}){return o.map(a=>{const t=Object.entries(a.time).flat();return e.jsx("div",{className:"z-10 border border-[black] box-border rounded-md",style:{gridColumnStart:t[0],gridRowStart:t[1][0],gridRowEnd:t[1][1],backgroundColor:a.color}},a.code+a.section+t[0])})}function Y({i:o,savedSchedule:a,setSavedSchedule:t}){const{setChosenClasses:s}=l.useContext(v),[n,c]=M(()=>({from:{opacity:0,y:30,scale:1},to:{opacity:1,y:0}}),[]);function d(x){x.stopPropagation(),c.start({from:{opacity:1,scale:1},to:{opacity:0,scale:0},onResolve:()=>{t(a.filter(m=>m.id!==o.id))}})}function i(){s(o.data)}return e.jsxs(E.div,{className:"h-full aspect-[1.61/1] bg-[white] rounded-md grid grid-rows-[repeat(20,minmax(0,1fr))] grid-cols-5 relative hover:bg-slate-200 md:shadow-lg shadow-md cursor-pointer",style:n,onClick:i,children:[o.vData.map((x,m)=>e.jsx(B,{blocksToShow:x},m)),e.jsx(k,{icon:$,className:"absolute opacity-10 m-1 bottom-0 right-0 hover:opacity-50 cursor-pointer",onClick:d})]},o.id)}function J({viewData:o}){const[a,t]=l.useState([]);return l.useEffect(()=>{t(()=>o.map((s,n)=>e.jsx(l.Fragment,{children:e.jsx(U,{blocksToShow:s})},n)))},[o]),e.jsxs("section",{className:"md:col-span-7 md:row-span-5 max-md:min-h-[60%] col-span-full bg-c1 rounded-lg md:p-4 p-2 box-border grid grid-cols-[1fr_repeat(5,minmax(0,2fr))] grid-rows-[repeat(21,minmax(0,1fr))] max-md:order-2",children:[e.jsx("div",{className:"col-span-1 row-span-full grid grid-cols-1 grid-rows-[repeat(21,minmax(0,1fr))]",children:[...Array(21).keys()].map(s=>e.jsxs("span",{className:"translate-y-1/2 box-border md:pr-4 md:text-xs text-[0.5rem] flex items-center justify-end pr-2",children:[Math.floor(s/2)+8,":",s%2===0?"00":"30"]},s))}),e.jsxs("div",{className:"col-span-5 row-span-full grid grid-cols-5 grid-rows-[repeat(21,minmax(0,1fr))] border-collapse relative",children:[e.jsx("div",{className:"absolute w-full h-full grid grid-rows-[repeat(20,minmax(0,1fr))] row-start-2",children:[...Array(19).keys()].map(s=>e.jsx("div",{children:e.jsx(O,{n:s,lineProperty:"width"})},`horizontal-${s}`))}),e.jsxs("div",{className:"absolute w-full h-full grid grid-cols-5 grid-rows-[repeat(21,minmax(0,1fr))]",children:[e.jsx("div",{className:"row-span-1 col-span-full"}),[...Array(4).keys()].map(s=>e.jsx("div",{className:"row-[span_20/span_20]",children:e.jsx(O,{n:s,lineProperty:"height"})},`vertical-${s}`))]}),["Monday","Tuesday","Wednesday","Thursday","Friday"].map(s=>{const n=window.innerWidth>=1100?s:s.slice(0,3);return e.jsx("span",{className:"text-center font-semibold md:text-base text-xs",children:n},s)}),e.jsx("div",{className:"grid grid-rows-[repeat(20,minmax(0,1fr))] grid-cols-5 bg-[white] row-span-full col-span-full row-start-2 rounded-lg md:shadow-lg shadow-md",children:a})]})]})}function O({n:o,lineProperty:a}){const t=M({from:{[a]:"0%"},to:{[a]:"100%"},delay:a==="height"?o*100:o*30}),s=a==="height"?"border-r-2 w-full left-[1px]":"border-b-2 h-full top-[1px]";return e.jsx(E.div,{className:`${a==="height"?"w-full py-2":"h-full px-2"} box-border`,style:t,children:e.jsx("div",{className:`${s} border-[hsl(0,0%,77%)] h-full w-full relative`})})}function U({blocksToShow:o}){const a=z(o,{from:{y:-20,scale:0},enter:{y:0,scale:1},leave:{y:-20,scale:0},trail:50}),{chosenClasses:t,setChosenClasses:s}=l.useContext(v);return a((n,c)=>{const d=Object.entries(c.time).flat();return e.jsxs(E.div,{className:"lg:text-base sm:text-xs text-[8px] leading-[10px] z-10 p-2 border border-[black] outline outline-1 outline-[black] text-[black] cursor-pointer rounded-xl",style:{gridColumnStart:d[0],gridRowStart:d[1][0],gridRowEnd:d[1][1],backgroundColor:c.color,...n},onClick:()=>{s(t.filter(i=>i.code!==c.code))},children:[e.jsx("p",{className:"lg:line-clamp-1",children:c.code}),e.jsx("p",{children:c.section})]},c.code+c.section+d[0])})}function C(){return e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("p",{children:"Wait it's cooking"})})}const G=l.lazy(()=>_(()=>import("./Classes-549521d7.js"),["assets/Classes-549521d7.js","assets/index-8f0c1633.js","assets/index-c3dfa70e.css","assets/react-spring_web.modern-1c4e7015.js"]));function H({classes:o,setLoading:a}){const[t,s]=l.useState(""),n=l.useDeferredValue(t),[c,d]=l.useState(!1);return e.jsxs("section",{className:"md:col-span-5 md:row-span-5 bg-c1 rounded-lg box-border flex flex-col max-md:order-3",children:[e.jsxs("label",{className:"relative md:mx-4 mx-2 md:mt-4 mt-2",children:[e.jsx(k,{icon:V,className:"absolute top-1/2 right-2 -translate-y-1/2 cursor-pointer",onMouseOver:()=>d(!0),onMouseOut:()=>d(!1)}),c&&e.jsxs("div",{className:"absolute z-20 top-0 right-0 md:translate-x-full -translate-x-10 bg-[white] p-2 rounded-lg md:max-w-xs w-[70dvw]",children:[e.jsx("p",{children:"You can search any keyword for the class you are looking for."}),e.jsx("br",{}),e.jsx("p",{children:'Separate your keywords with commas. E.g. "Biology, 101" will search for all biology 101-NYA-05 and biology 101-DCN-05 classes.'}),e.jsx("br",{}),"Examples: ",e.jsx("br",{}),e.jsxs("ul",{className:"pl-4",children:[e.jsxs("li",{className:"list-disc",children:[e.jsxs("span",{className:"font-bold",children:["r",">","4.5"]})," (teachers with +4.5/5 rating. Symbol can be ","<"," , ",">"," or ","="," )"]}),e.jsxs("li",{className:"list-disc",children:[e.jsxs("span",{className:"font-bold",children:["s",">","80"]})," (teachers with +80/100 score. Symbol can be ","<"," , ",">"," or ","="," )"]}),e.jsxs("li",{className:"list-disc",children:[e.jsx("span",{className:"font-bold",children:"Linear Al, WF"})," (Linear Algebra I/II/III that has classes on Wednesday and Friday. DAYS must be in ALL CAPS)"]}),e.jsxs("li",{className:"list-disc",children:[e.jsx("span",{className:"font-bold",children:"honours"}),' (honours classes. Special keywords include "honours" and "blended")']}),e.jsxs("li",{className:"list-disc",children:[e.jsx("span",{className:"font-bold",children:"p=Steven Randall, blended"})," ",'(blended classes by teacher who has "Steven Randall" in their name. Must have "p=" before)']}),e.jsxs("li",{className:"list-disc",children:[e.jsx("span",{className:"font-bold",children:"ENGLISH, haunted house"}),' (all English class that has "haunted house" in their name. COURSE NAME must be in ALL CAPS)']})]})]}),e.jsx("input",{className:"bg-c2 w-full p-1 md:text-lg rounded-lg outline-none shrink-0 focus:bg-c4 transition md:shadow-lg shadow-md",placeholder:"COURSE, code, professor, rating, ...",value:t,onChange:i=>s(i.target.value)})]}),e.jsx("div",{className:"w-full h-full box-border rounded-lg overflow-y-auto md:p-4 p-2",children:e.jsx(l.Suspense,{fallback:e.jsx(C,{}),children:n===t?e.jsx(G,{input:n,classes:o,setLoading:a}):e.jsx(C,{})})})]})}const q=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"})),K=l.lazy(()=>_(()=>Promise.resolve().then(()=>q),void 0)),v=l.createContext({chosenClasses:[],setChosenClasses:()=>{}});function Z(){const[o,a]=l.useState([]),[t,s]=l.useState(!1),[n,c]=l.useState([]),d=l.useMemo(()=>i(n),[n]);l.useEffect(()=>{x(d)&&(c(n.slice(0,-1)),alert("The chosen class overlaps with another!"))},[d]),l.useEffect(()=>{async function m(h,b){try{const f=await fetch(h);if(!f.ok)throw new Error("Network response was not ok");const N=await f.json();b(N)}catch(f){console.log(f)}}m("/me-schedule-maker/data/all.json",a)},[]);function i(m){const h=["M","T","W","R","F"],b=[...Array(21).keys()].map(u=>(u%2===0?u*50+800:Math.floor(u/2)*2*50+830).toFixed(0)),f=["hsl(150,97%,85%)","hsl(230,97%,85%)","hsl(110,97%,85%)","hsl(270,97%,85%)","hsl(70,97%,85%)","hsl(310,97%,85%)","hsl(30,97%,85%)","hsl(350,97%,85%)","hsl(190,97%,85%)"];return m.map((u,S)=>{const r=structuredClone(Object.entries(u.lecture)),p=structuredClone(Object.entries(u.lab));return r.filter(j=>!["title","prof","rating"].includes(j[0])).concat(p.filter(j=>!["title","prof","rating"].includes(j[0]))).flatMap(j=>{const R=j[0].split("").filter(w=>w!=="\0").filter(w=>w==="S"?(alert("There is class on Saturday as well"),!1):!0),I=j[1],A=I.split("-")[0].replace("\0",""),L=I.split("-")[1].replace("\0","");return R.flatMap(w=>{const F=b.findIndex(y=>Number(y)===Number(A))+1,D=b.findIndex(y=>Number(y)===Number(L))+1,T=h.findIndex(y=>y===w.replace("\0",""))+1;return{code:u.code,section:u.section,time:{[`${T}`]:[F,D]},color:f[S]}})})})}function x(m){const h=m.flat().map(r=>r.time),b=h.filter(r=>r[1]).flatMap(r=>Object.values(r)),f=h.filter(r=>r[2]).flatMap(r=>Object.values(r)),N=h.filter(r=>r[3]).flatMap(r=>Object.values(r)),u=h.filter(r=>r[4]).flatMap(r=>Object.values(r)),S=h.filter(r=>r[5]).flatMap(r=>Object.values(r));return!![b,f,N,u,S].some(r=>{if(r.length<=1)return!1;const p=r.at(-1);return!!r.slice(0,-1).some(g=>Number(g[0])>Number(p[0])?Number(p[1])>Number(g[0]):Number(g[0])<Number(p[0])?Number(p[0])<Number(g[1]):Number(g[0])===Number(p[0]))})}return e.jsx(v.Provider,{value:{chosenClasses:n,setChosenClasses:c},children:e.jsx("section",{className:"w-full h-full bg-c9 md:grid md:grid-cols-12 md:grid-rows-6 box-border md:gap-4 gap-2 md:p-4 p-2 text-c9 flex flex-col md:text-base text-xs overflow-auto",children:e.jsxs(l.Suspense,{fallback:e.jsx(C,{}),children:[e.jsx(K,{classes:o,setLoading:s}),t&&e.jsxs(e.Fragment,{children:[e.jsx(J,{viewData:d}),e.jsx(W,{viewData:d})]})]})})})}export{v as ClassContext,Z as default};
