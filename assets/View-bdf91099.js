import{r as i,j as e,F as w,R as F,T as _,u as C,a as y,V as I,W as $,X as T,Y as A,Z as z,O as X,U as D,Q as U,a0 as V,$ as W,a1 as H}from"./index-5d84b5cc.js";const P=i.lazy(()=>_(()=>import("./Classes-35074d62.js"),["assets/Classes-35074d62.js","assets/index-5d84b5cc.js","assets/index-e9612091.css"]));function B({classes:c,setLoading:l,viewData:n,userData:o}){const[r,d]=i.useState(""),a=i.useDeferredValue(r),[s,t]=i.useState("search"),m=i.useDeferredValue(s),[x,u]=i.useState(!1);return e.jsxs("section",{className:"md:col-span-5 md:row-span-6 bg-c1 rounded-lg box-border flex flex-col max-md:order-2 overflow-hidden",children:[e.jsxs("nav",{className:"flex justify-between w-full p-2 box-border",children:[e.jsx(M,{current:s,setCurrent:t,text:"search"}),e.jsx(M,{current:s,setCurrent:t,text:"filter"}),e.jsx(M,{current:s,setCurrent:t,text:"saved"})]}),s==="search"&&m===s?e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"relative md:mx-4 mx-2 mt-2",children:[e.jsx(w,{icon:F,className:"absolute top-1/2 right-2 -translate-y-1/2 cursor-pointer",onMouseOver:()=>u(!0),onMouseOut:()=>u(!1)}),x&&e.jsxs("div",{className:"absolute z-20 top-0 right-0 md:translate-x-full -translate-x-10 bg-[white] p-2 rounded-lg md:max-w-sm w-[70dvw]",children:[e.jsx("p",{children:"Search by keywords, separate them by a comma. Use the filter tab to make your life easier."}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Available options:"}),e.jsxs("ul",{className:"pl-4 [&>li]:list-disc [&>li>span]:font-bold",children:[e.jsxs("li",{children:[e.jsx("span",{children:"@"}),": only show available classes."]}),e.jsxs("li",{children:[e.jsxs("span",{children:["r",">","n"]}),": Teachers with +n/5 rating on ratemyprofessor. Symbol can be ","<",", ",">"," or = (e.g. r","=","5)"]}),e.jsxs("li",{children:[e.jsxs("span",{children:["s",">","n"]}),": Teachers with +n/100 score. Symbol can be ","<",", ",">"," or =. (e.g. s=100)"]}),e.jsxs("li",{children:[e.jsx("span",{children:"honours/blended"}),": special keywords."]}),e.jsxs("li",{children:[e.jsx("span",{children:"p=professor"}),": classes taught by"," ",e.jsx("i",{children:"professor"})," (e.g. p=patrik searches classes taught by professors with patrik in their names)"]}),e.jsxs("li",{children:[e.jsx("span",{children:"COURSE_NAME"}),": searches classes that belongs in COURSE_NAME (e.g. ENGLISH searches for english classes)"]}),e.jsxs("li",{children:[e.jsx("span",{children:"XXX-XXX-XXX"}),": course code."]}),e.jsxs("li",{children:[e.jsx("span",{children:"M/T/W/R/F"}),": has class on that day."]}),e.jsxs("li",{children:[e.jsx("span",{children:"class_name"}),": if its none of the abovementioned keywords, it will treat the keyword as the class name."]})]})]})]}),e.jsx("input",{className:"bg-c2 w-full p-1 md:text-lg rounded-lg outline-none shrink-0 focus:bg-c4 transition md:shadow-lg shadow-md",placeholder:"COURSE, code, professor, rating, class name, ...",value:r,onChange:p=>d(p.target.value)})]}),e.jsx("div",{className:"w-full h-full box-border rounded-lg overflow-y-auto md:px-4 px-2 md:mt-4 mt-2",children:e.jsx(i.Suspense,{fallback:e.jsx(O,{}),children:a===r?e.jsx(P,{input:a,classes:c,setLoading:l}):e.jsx(O,{})})})]}):s==="search"&&e.jsx(O,{}),s==="filter"&&e.jsx(Z,{setInput:d,setCurrent:t}),s==="saved"&&e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsx(Q,{viewData:n,userData:o}),e.jsx(q,{viewData:n})]})]})}function M({current:c,setCurrent:l,text:n}){var a;const o={width:c===n?"100%":"0%"},[r,d]=C(()=>({from:o}),[]);return i.useEffect(()=>{d.start({to:o})},[c]),e.jsxs("div",{className:"w-1/3 text-center cursor-pointer box-border border-c9 border-solid relative flex justify-center",onClick:()=>l(n),children:[(a=n.at(0))==null?void 0:a.toUpperCase().concat(n.slice(1)),e.jsx(y.p,{className:"absolute h-full box-border border-solid border-b-c9 border-b-2",style:r})]})}function L(c){const l=c.flat().map(s=>s.time),n=l.filter(s=>s[1]).flatMap(s=>Object.values(s)),o=l.filter(s=>s[2]).flatMap(s=>Object.values(s)),r=l.filter(s=>s[3]).flatMap(s=>Object.values(s)),d=l.filter(s=>s[4]).flatMap(s=>Object.values(s)),a=l.filter(s=>s[5]).flatMap(s=>Object.values(s));return!![n,o,r,d,a].some(s=>{if(s.length<=1)return!1;const t=s.at(-1);return!!s.slice(0,-1).some(m=>Number(m[0])>Number(t[0])?Number(t[1])>Number(m[0]):Number(m[0])<Number(t[0])?Number(t[0])<Number(m[1]):Number(m[0])===Number(t[0]))})}function J(c,l){const n=["M","T","W","R","F"],o=[...Array(21).keys()].map(a=>(a%2===0?a*50+800:Math.floor(a/2)*2*50+830).toFixed(0)),r=["hsl(150,97%,85%)","hsl(230,97%,85%)","hsl(110,97%,85%)","hsl(270,97%,85%)","hsl(70,97%,85%)","hsl(310,97%,85%)","hsl(30,97%,85%)","hsl(350,97%,85%)","hsl(190,97%,85%)","#CCC","#FFF","#999"];return c.map((a,s)=>{const t=structuredClone(Object.entries(a.lecture)),m=structuredClone(Object.entries(a.lab?a.lab:{}));return t.filter(u=>!["title","prof","rating"].includes(u[0])).concat(m.filter(u=>!["title","prof","rating"].includes(u[0]))).flatMap(u=>{const p=u[0].split("").filter(f=>f==="S"&&!l?(alert("There is class on Saturday as well"),!1):!0),b=u[1],j=b.split("-")[0],g=b.split("-")[1];return p.flatMap(f=>{const v=o.findIndex(h=>Number(h)===Number(j))+1,k=o.findIndex(h=>Number(h)===Number(g))+1,S=n.findIndex(h=>h===f)+1;return{code:a.code,section:a.section,time:{[`${S}`]:[v,k]},color:r[s],teacher:a.lecture.prof,title:a.lecture.title}})})})}function O(){return e.jsxs("div",{className:"gap-2 w-full h-full flex flex-col items-center justify-center",children:[e.jsx("img",{src:"/me-schedule-maker/images/cooking-pot.gif",alt:"cooking-pot git",className:"h-20"}),e.jsx("p",{children:"Wait it's cooking"})]})}function Q({viewData:c,userData:l}){const n="jac-mock-schedule-maker",[o,r]=i.useState(()=>{if(l)return l.schedules?l.schedules:[];{const t=window.localStorage.getItem(n);return t?JSON.parse(t):[]}}),d=i.useRef(o.length),{chosenClasses:a}=i.useContext(N);function s(t){do d.current+=1;while(o.map(m=>m.id).includes(d.current));r([...o,{id:d.current,vData:t,data:a}])}return i.useEffect(()=>{l?I(l.uid,o).catch(t=>console.log(t)):window.localStorage.setItem(n,JSON.stringify(o))},[o]),e.jsx("div",{className:"basis-1/3 shrink-0 overflow-auto",children:e.jsxs("section",{className:"bg-c1 rounded-lg box-border flex w-full flex-wrap gap-2 p-2",children:[e.jsx("div",{className:"bg-c2 hover:bg-c3 active:bg-c4 transition rounded-md flex items-center justify-center md:p-4 p-2 cursor-pointer h-20",onClick:()=>s(c),children:e.jsx(w,{icon:$,className:"md:text-4xl text-xl"})}),o.map((t,m)=>e.jsx(Y,{i:t,savedSchedule:o,setSavedSchedule:r,index:m},t.id))]})})}function G({blocksToShow:c}){return c.map(l=>{const n=Object.entries(l.time).flat();return e.jsx("div",{className:"z-10 border border-[black] box-border rounded-sm",style:{gridColumnStart:n[0],gridRowStart:n[1][0],gridRowEnd:n[1][1],backgroundColor:l.color}},l.code+l.section+n[0])})}function Y({i:c,savedSchedule:l,setSavedSchedule:n,index:o}){const{setChosenClasses:r}=i.useContext(N),d=structuredClone(c);d.data||(d.data=[]),d.vData||(d.vData=[]);const[a,s]=C(()=>({from:{opacity:0,y:30,scale:1},to:{opacity:1,y:0},delay:o*70}),[]);function t(x){x.stopPropagation(),s.start({from:{opacity:1,scale:1},to:{opacity:0,scale:0},onResolve:()=>{n(l.filter(u=>u.id!==c.id))}})}function m(){r(d.data)}return e.jsxs(y.div,{className:"min-w-[calc(5rem*1.6)] bg-[white] rounded-md grid grid-rows-[repeat(20,minmax(0,1fr))] grid-cols-5 relative hover:bg-slate-200 md:shadow-lg shadow-md cursor-pointer h-20 overflow-hidden",style:a,onClick:m,children:[d.vData.map((x,u)=>e.jsx(G,{blocksToShow:x},u)),e.jsx(w,{icon:T,className:"absolute opacity-10 m-1 bottom-0 right-0 hover:opacity-50 cursor-pointer z-10",onClick:t})]},c.id)}function Z({setInput:c,setCurrent:l}){const[n,o]=i.useState(!1),r=i.useRef(null);function d(a){if(a.preventDefault(),!r.current){c(""),l("search");return}const s=r.current;function t(h){return s.elements.namedItem(h)}const m=t("courseName").value.toUpperCase(),x=t("className").value,u=t("teacherName").value.split(" ").flatMap(h=>h.split(",")).filter(h=>h!=="").map(h=>`p=${h}`),p=Number(t("ratingMax").value),b=Number(t("ratingMin").value),j=[b?`r>${b}`:"",p?`r<${p}`:""],g=Number(t("scoreMax").value),f=Number(t("scoreMin").value),v=[f?`s>${f}`:"",g?`s<${g}`:""],k=["monday","tuesday","wednesday","thursday","friday","honours","blended","available"].map(h=>t(h).checked).map((h,R)=>h?["M","T","W","R","F","honours","blended","@"].at(R):""),S=[m,x,...u,...j,...v,...k];c(S.filter(h=>h!=="").join(", ")),l("search")}return e.jsx("div",{className:"box-border w-full h-full p-2 overflow-auto",children:e.jsxs("form",{onSubmit:d,className:"flex flex-col md:text-xl text-base gap-4",ref:r,children:[e.jsxs("label",{children:[e.jsx("p",{className:"font-semibold",children:"Course Name or Code"}),e.jsx("input",{placeholder:"English",className:"outline-none focus:bg-c2 w-full rounded-lg p-1",name:"courseName"})]}),e.jsxs("label",{children:[e.jsx("p",{className:"font-semibold",children:"Class Name"}),e.jsx("input",{placeholder:"Hockey is everything",className:"outline-none focus:bg-c2 w-full rounded-lg p-1",name:"className"})]}),e.jsxs("label",{children:[e.jsx("p",{className:"font-semibold",children:"Teacher Name"}),e.jsx("input",{placeholder:"Patrik Burger",className:"outline-none focus:bg-c2 w-full rounded-lg p-1",name:"teacherName"})]}),e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsxs("label",{className:"basis-1/2",children:[e.jsx("p",{className:"font-semibold",children:"Rating /5"}),e.jsxs("div",{className:"flex gap-1 w-full",children:[e.jsx("div",{className:"basis-full",children:e.jsx("input",{className:"outline-none focus:bg-c2 w-full rounded-lg p-1",placeholder:"0",name:"ratingMin"})}),e.jsx("p",{className:"flex items-center",children:"to"}),e.jsx("div",{className:"basis-full",children:e.jsx("input",{className:"outline-none focus:bg-c2 w-full rounded-lg p-1",placeholder:"5",name:"ratingMax"})})]})]}),e.jsxs("label",{className:"basis-1/2",children:[e.jsxs("div",{className:"font-semibold relative",children:["Score /100",e.jsx(w,{icon:A,className:"ml-2",onMouseOver:()=>o(!0),onMouseOut:()=>o(!1)}),n&&e.jsx("div",{className:"absolute top-0 left-0 mt-6 bg-[white] rounded-lg p-2 z-10 text-xs flex",children:e.jsx("p",{className:"w-full",children:"The score is calculated to take into account the number of raters. A high rating with low raters will perform worse in comparison to a lower rating with many raters."})})]}),e.jsxs("div",{className:"flex gap-1 w-full",children:[e.jsx("div",{className:"basis-full",children:e.jsx("input",{className:"outline-none focus:bg-c2 w-full rounded-lg p-1",placeholder:"0",name:"scoreMin"})}),e.jsx("p",{className:"flex items-center",children:"to"}),e.jsx("div",{className:"basis-full",children:e.jsx("input",{className:"outline-none focus:bg-c2 w-full rounded-lg p-1",placeholder:"100",name:"scoreMax"})})]})]})]}),e.jsxs("label",{className:"flex gap-4",children:[e.jsxs("div",{className:"basis-1/2",children:[e.jsx("p",{className:"font-semibold",children:"Days"}),e.jsxs("p",{className:"pl-4",children:[e.jsx("input",{type:"checkbox",name:"monday"})," Monday"]}),e.jsxs("p",{className:"pl-4",children:[e.jsx("input",{type:"checkbox",name:"tuesday"})," Tuesday"]}),e.jsxs("p",{className:"pl-4",children:[e.jsx("input",{type:"checkbox",name:"wednesday"})," Wednesday"]}),e.jsxs("p",{className:"pl-4",children:[e.jsx("input",{type:"checkbox",name:"thursday"})," Thursday"]}),e.jsxs("p",{className:"pl-4",children:[e.jsx("input",{type:"checkbox",name:"friday"})," Friday"]})]}),e.jsxs("div",{className:"basis-1/2",children:[e.jsx("p",{className:"font-semibold",children:"Special"}),e.jsxs("p",{className:"pl-4",children:[e.jsx("input",{type:"checkbox",name:"honours"})," Honours"]}),e.jsxs("p",{className:"pl-4",children:[e.jsx("input",{type:"checkbox",name:"blended"})," Blended"]})]})]}),e.jsxs("label",{children:[e.jsx("p",{className:"font-semibold",children:"Options"}),e.jsxs("p",{className:"pl-4",children:[e.jsx("input",{type:"checkbox",name:"available"})," Only show available classes"]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"reset",className:"rounded-lg p-2 transition hover:outline-c9 outline outline-1 outline-c1",children:"Clear"}),e.jsx("button",{type:"submit",className:"rounded-lg bg-c9 p-2 text-c1 transition hover:bg-c7",children:"Apply"})]})]})})}function q({viewData:c}){const l=c.map(n=>n[0]);return e.jsxs("section",{className:"basis-2/3 flex flex-col box-border px-1 pb-1 gap-1 shrink-0 overflow-x-hidden",children:[e.jsxs("div",{className:"sticky top-0 left-0 z-10 bg-c1 pt-1",children:["Course Count: ",l.length]}),l.map((n,o)=>e.jsx(K,{viewData:n,index:o}))]})}function K({viewData:c,index:l}){const{color:n,code:o,title:r,section:d,teacher:a}=c,{chosenClasses:s,setChosenClasses:t}=i.useContext(N),[m,x]=i.useState(!1),u=i.useRef(!0),p=C({from:{x:30,opacity:0,y:0},to:{x:m?2:0,y:m?2:0,opacity:1},delay:u.current?l*70:0});return e.jsxs(y.div,{style:{backgroundColor:n,...p},className:"relative box-border p-1 text-sm cursor-pointer rounded-lg hover:shadow-xl hover:z-10",onClick:()=>t(s.filter(b=>b.code!==o)),onPointerOver:()=>{x(!0),u.current=!1},onPointerOut:()=>x(!1),children:[e.jsx("p",{className:"font-bold",children:r}),e.jsxs("span",{className:"font-light",children:[o," ",d]})," ",a]})}const N=i.createContext({chosenClasses:[],setChosenClasses:()=>{}});function ee({login:c}){z.assign({frameLoop:"always"});const l=X(),[n,o]=i.useState([]),[r,d]=i.useState(!1),[a,s]=i.useState([]),[t,m]=i.useState(null),x=i.useMemo(()=>J(a),[a]),{user:u}=i.useContext(D);i.useEffect(()=>{L(x)&&(s(a.slice(0,-1)),alert("The chosen class overlaps with another!"))},[x]),i.useEffect(()=>{c&&(u?U(u.uid,j=>{m({uid:u.uid,schedules:j.val()})},"schedules"):l("/"));async function b(j,g){try{const f=await fetch(j);if(!f.ok)throw new Error("Network response was not ok");const v=await f.json();g(v)}catch(f){console.log(f)}}b("/me-schedule-maker/data/all.json",o).catch(j=>console.log(j))},[u,c]);async function p(){await W()}return e.jsxs(N.Provider,{value:{chosenClasses:a,setChosenClasses:s},children:[e.jsxs("nav",{className:"md:text-base text-xs w-full bg-c9 text-c1 shrink-0 flex justify-between items-center",children:[e.jsx(w,{icon:V,className:"ml-2 cursor-pointer transition hover:text-c4",onClick:()=>l("/")}),e.jsxs("p",{children:["Fall 2023 JAC"," ",e.jsx("span",{className:" max-md:hidden",children:"Mock Schedule Maker"})]}),e.jsx("p",{onClick:()=>void p(),className:"mr-2 cursor-pointer transition hover:text-c4",children:t?"Sign Out":""})]}),e.jsxs("section",{className:"w-full basis-full bg-c9 md:grid md:grid-cols-12 md:grid-rows-6 box-border gap-2 px-2 pb-2 text-c9 flex flex-col md:text-base text-xs overflow-auto",children:[e.jsx(B,{classes:n,setLoading:d,viewData:x,userData:t}),r&&n.length!==0&&e.jsx(e.Fragment,{children:e.jsx(se,{viewData:x})})]})]})}const re=Object.freeze(Object.defineProperty({__proto__:null,ClassContext:N,default:ee},Symbol.toStringTag,{value:"Module"}));function se({viewData:c,login:l}){const[n,o]=i.useState([]);return i.useEffect(()=>{o(()=>c.map((r,d)=>e.jsx(i.Fragment,{children:e.jsx(le,{blocksToShow:r,login:l})},d)))},[c]),e.jsxs("section",{className:"rounded-lg md:col-span-7 md:row-span-6 max-md:min-h-[60%] col-span-full bg-c1 md:p-4 p-2 box-border grid grid-cols-[1fr_repeat(5,minmax(0,2fr))] grid-rows-[repeat(21,minmax(0,1fr))] max-md:order-1",children:[e.jsx("div",{className:"col-span-1 row-span-full grid grid-cols-1 grid-rows-[repeat(21,minmax(0,1fr))]",children:[...Array(21).keys()].map(r=>e.jsxs("span",{className:"translate-y-1/2 box-border md:pr-4 md:text-xs text-[0.5rem] flex items-center justify-end pr-2",children:[Math.floor(r/2)+8,":",r%2===0?"00":"30"]},r))}),e.jsxs("div",{className:"col-span-5 row-span-full grid grid-cols-5 grid-rows-[repeat(21,minmax(0,1fr))] border-collapse relative",children:[e.jsx("div",{className:"absolute w-full h-full grid grid-rows-[repeat(20,minmax(0,1fr))] row-start-2",children:[...Array(19).keys()].map(r=>e.jsx("div",{children:e.jsx(E,{n:r,lineProperty:"width"})},`horizontal-${r}`))}),e.jsxs("div",{className:"absolute w-full h-full grid grid-cols-5 grid-rows-[repeat(21,minmax(0,1fr))]",children:[e.jsx("div",{className:"row-span-1 col-span-full"}),[...Array(4).keys()].map(r=>e.jsx("div",{className:"row-[span_20/span_20]",children:e.jsx(E,{n:r,lineProperty:"height"})},`vertical-${r}`))]}),["Monday","Tuesday","Wednesday","Thursday","Friday"].map(r=>{const d=window.innerWidth>=1100?r:r.slice(0,3);return e.jsx("span",{className:"text-center font-semibold md:text-base text-xs",children:d},r)}),e.jsx("div",{className:"grid grid-rows-[repeat(20,minmax(0,1fr))] grid-cols-5 bg-[white] row-span-full col-span-full row-start-2 rounded-lg md:shadow-lg shadow-md",children:n})]})]})}function E({n:c,lineProperty:l}){const n=C({from:{[l]:"0%"},to:{[l]:"100%"},delay:l==="height"?c*100:c*30}),o=l==="height"?"border-r-2 w-full left-[1px]":"border-b-2 h-full top-[1px]";return e.jsx(y.div,{className:`${l==="height"?"w-full py-2":"h-full px-2"} box-border`,style:n,children:e.jsx("div",{className:`${o} border-[hsl(0,0%,77%)] h-full w-full relative`})})}function le({blocksToShow:c,login:l}){const n=H(c,{from:{y:-20,scale:0},enter:{y:0,scale:1},leave:{y:-20,scale:0},trail:50}),{chosenClasses:o,setChosenClasses:r}=i.useContext(N);return n((d,a)=>{const s=Object.entries(a.time).flat();return e.jsxs(y.div,{className:`md:text-[14px] md:leading-[14px] text-[8px] leading-[10px] z-10 p-1 border border-[black] outline outline-1 outline-[black] text-[black] ${l?"":"cursor-pointer"} rounded-lg overflow-hidden`,style:{gridColumnStart:s[0],gridRowStart:s[1][0],gridRowEnd:s[1][1],backgroundColor:a.color,...d},onClick:()=>{l||r(o.filter(t=>t.code!==a.code))},children:[e.jsx("p",{className:"line-clamp-2 font-semibold",children:a.title}),e.jsx("p",{className:"line-clamp-1 font-light mt-1",children:a.code}),e.jsx("p",{className:"font-light",children:a.section}),e.jsx("p",{className:"line-clamp-2 mt-1",children:a.teacher})]},a.code+a.section+s[0])})}export{N as C,re as S,se as V,L as c,J as h};
