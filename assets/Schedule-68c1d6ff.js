import{O as E,r as s,U as O,X as z,j as e,L,F as p,Y as M,$ as U,u as H,a as m,Z as V}from"./index-c75fd20c.js";import{C as W,S as I,V as J}from"./CurrentClassses-06f5e58e.js";function Y({login:r}){const o=E(),[c,i]=s.useState(!1),[a,f]=s.useState("winter"),[u,j]=s.useState([]),[g,b]=s.useState({}),[w,v]=s.useState(),[C,k]=s.useState(!1),[S,N]=s.useState([]),[h,y]=s.useState(null),{user:n}=s.useContext(O);async function x(t,l){try{const d=await fetch(t);if(!d.ok)throw new Error("Network response was not ok");const A=await d.json();l(A)}catch(d){console.log(d)}}s.useEffect(()=>{r&&(n?z(n.uid,t=>{y({uid:n.uid,schedules:t.val()})},"schedules"):o("/"))},[n,r,o]),s.useEffect(()=>{const t=a==="fall"?"":"winter-";x(`/me-schedule-maker/data/${t}all.json`,j).catch(l=>console.log(l)),x(`/me-schedule-maker/data/${t}data.json`,b).catch(l=>console.log(l))},[a]);async function D(){await U()}const[F,$]=s.useState(!0);return e.jsxs(W.Provider,{value:{chosenClasses:S,setChosenClasses:N,hoveredClass:w,setHoveredClass:v},children:[e.jsxs("nav",{className:"md:text-base text-xs w-full bg-c9 text-c1 shrink-0 flex justify-between items-center",children:[e.jsx(L,{to:n?`../users/${n.uid}`:"/",children:e.jsx(p,{icon:M,className:"ml-2 cursor-pointer transition hover:text-c4"})}),e.jsxs("div",{className:"flex gap-2",children:[a==="fall"?"Fall 2023":"Winter 2024"," JAC"," ",e.jsx("span",{className:" max-md:hidden",children:"Mock Schedule Maker"}),e.jsx(P,{show:c,handleClick:()=>i(t=>!t),current:a,setCurrent:f})]}),e.jsx("p",{onClick:()=>void D(),className:"mr-2 cursor-pointer transition hover:text-c4",children:h?"Sign Out":""})]}),e.jsxs("section",{className:"w-full basis-full bg-c9 md:grid md:grid-cols-12 md:grid-rows-6 box-border gap-2 px-2 pb-2 text-c9 flex flex-col md:text-base text-xs overflow-auto",children:[e.jsx(I,{classes:u,setLoading:k,userData:h,aucmpData:g}),C&&u.length!==0&&e.jsx(e.Fragment,{children:e.jsx(J,{})})]}),F&&e.jsxs("div",{className:"absolute w-screen h-screen z-30 flex flex-col items-center justify-center bg-white/40 backdrop-filter backdrop-blur-lg",children:[e.jsx("p",{children:"An updated version with autobuild and export to excel is available at:"}),e.jsx("a",{href:"https://dream-builder-hazel.vercel.app/editor/search",children:"https://dream-builder-hazel.vercel.app/editor/search"}),e.jsx("button",{onClick:()=>$(!1),children:"Close"})]})]})}function P({show:r,handleClick:o,current:c,setCurrent:i}){const a=H({rotate:r?180:0,y:r?"0%":"-200%"});return e.jsxs(e.Fragment,{children:[e.jsx(m.div,{style:{rotate:a.rotate},children:e.jsx(p,{icon:V,onClick:o,className:"cursor-pointer"})}),e.jsxs(m.div,{style:{y:a.y},className:"absolute md:top-6 top-4 z-10 text-c1 bg-c9 [&>p]:p-1 [&>p]:cursor-pointer",children:[e.jsx("p",{className:`${c==="fall"?"bg-c8":""} hover:font-bold transition`,onClick:()=>{i("fall"),o()},children:"Fall 2023"}),e.jsx("p",{className:`${c==="winter"?"bg-c8":""} hover:font-bold transition`,onClick:()=>{i("winter"),o()},children:"Winter 2024"})]})]})}export{Y as default};
