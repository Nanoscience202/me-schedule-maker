import{r as g,j as t,F as v}from"./index-8cc3de04.js";import{h as A}from"./react-spring_web.modern-9b73ba42.js";import{ClassContext as C}from"./Schedule-945f0614.js";function E({input:n,classes:f,setLoading:a}){g.useEffect(()=>a(!0),[]);let o=n.split(",");o=o.map(e=>e.trim());const{chosenClasses:u,setChosenClasses:x}=g.useContext(C);function h(e,r){const c=["[0-9]","[0-9]","[0-9]","-","[0-9A-Z]","[0-9A-Z]","[0-9A-Z]","-","[0-9A-Z]","[0-9A-Z]"].slice(0,e.length).join(""),j=new RegExp(c);if(["r>","r<","r="].includes(e.slice(0,2))&&e.length>2){try{Number(e.slice(2))}catch{return[]}const s=Number(e.slice(2));switch(e[1]){case"=":return r.filter(l=>l.lecture.rating.avg===s);case">":return r.filter(l=>l.lecture.rating.avg>=s);case"<":return r.filter(l=>l.lecture.rating.avg<=s)}}else if(["s>","s<","s="].includes(e.slice(0,2))&&e.length>2){try{Number(e.slice(2))}catch{return[]}const s=Number(e.slice(2));switch(e[1]){case"=":return r.filter(l=>l.lecture.rating.score===s);case">":return r.filter(l=>l.lecture.rating.score>=s);case"<":return r.filter(l=>l.lecture.rating.score<=s)}}else if(e.slice(0,2)==="p="){const s=e.slice(2).toLowerCase();return r.filter(l=>l.lecture.prof.toLowerCase().includes(s))}else{if(j.test(e))return r.filter(s=>s.code.startsWith(e));if(e.split("").every(s=>"MTWRF".includes(s)))return r.filter(s=>{const l=structuredClone(Object.keys(s.lecture)),N=structuredClone(Object.keys(s.lab));return l.filter(d=>!["title","prof","rating"].includes(d)).concat(N.filter(d=>!["title","prof","rating"].includes(d))).join("").includes(e)});if(e.toUpperCase()===e)return r.filter(s=>s.course.startsWith(e));if(["honours","blended"].some(s=>s.startsWith(e.toLowerCase()))){const s=e.toLowerCase();if("honours".startsWith(s))return r.filter(l=>l.more.startsWith("For Honours"));if("blended".startsWith(s))return r.filter(l=>l.more.startsWith("BLENDED"))}else return r.filter(s=>s.lecture.title.toLowerCase().startsWith(e.toLowerCase()))}return[]}let m=h(o[0],f);o.slice(1).forEach(e=>{m=h(e,m)});function b(e){if(u.some(r=>e.code===r.code&&e.section===r.section))x(u.filter(r=>!(e.code===r.code&&e.section===r.section)));else if(u.some(r=>e.code===r.code)){alert("You already have a class from this course");return}else x([...u,e])}return t.jsx(t.Fragment,{children:m.map((e,r)=>t.jsxs("div",{className:"bg-c2 p-2 box-border md:mb-3 mb-2 rounded-lg md:shadow-lg shadow-md hover:bg-c3 transition cursor-pointer md:text-base text-xs",onClick:()=>b(e),children:[t.jsxs("p",{className:"font-light",children:[e.program,": ",e.course," ",e.code]}),t.jsxs("p",{className:"md:text-xl font-bold text-base",children:[e.section," ",e.lecture.title]}),t.jsxs("div",{className:"ml-4 relative",children:[e.lecture.prof," ",t.jsx("span",{className:"font-bold",children:e.lecture.rating.score===0?"N/A":e.lecture.rating.score})," ",t.jsx(p,{rating:e.lecture.rating})]}),Object.entries(e.lecture).filter(i=>!["title","prof","rating"].includes(i[0])).map((i,c)=>t.jsxs("p",{className:"ml-8 font-extralight",children:[t.jsx("span",{className:"font-normal",children:i[0]})," ",i[1]]},c)),"prof"in e.lab&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"ml-4 relative",children:[t.jsx("u",{children:"Lab"}),": ",e.lab.prof," ",t.jsx("span",{className:"font-bold",children:e.lab.rating.score===0?"N/A":e.lab.rating.score})," ",t.jsx(p,{rating:e.lab.rating})]}),Object.entries(e.lab).filter(i=>!["title","prof","rating"].includes(i[0])).map((i,c)=>t.jsxs("p",{className:"ml-8 font-extralight",children:[t.jsx("span",{className:"font-normal",children:i[0]})," ",i[1]]},c))]}),e.more!==""&&t.jsx(t.Fragment,{children:t.jsx("p",{className:"text-c6",children:e.more})})]},`i.code + ${r}`))})}function p({rating:n}){const[f,a]=g.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(v,{icon:A,className:"cursor-pointer",onMouseOver:()=>a(!0),onMouseOut:()=>a(!1)}),f&&t.jsxs("div",{className:"absolute top-0 left-0 mt-6 bg-[white] rounded-lg p-2 z-10 text-xs flex",children:[t.jsx("p",{className:"w-full",children:"The score is calculated to take into account the number of raters. A high rating with low raters will perform worse in comparison to a lower rating with many raters."}),t.jsxs("ul",{className:"pl-4 shrink-0",children:[t.jsxs("li",{className:"list-disc",children:["Rating: ",n.avg===0?"N/A":`${n.avg}/5`]}),t.jsxs("li",{className:"list-disc",children:["Raters: ",n.avg===0?"N/A":n.nRating]}),t.jsxs("li",{className:"list-disc",children:["Take Again:"," ",n.avg===0?"N/A":`${n.takeAgain.toFixed(1)}%`]}),t.jsxs("li",{className:"list-disc",children:["Difficulty: ",n.avg===0?"N/A":`${n.difficulty}/5`]})]})]})]})}export{E as default};
