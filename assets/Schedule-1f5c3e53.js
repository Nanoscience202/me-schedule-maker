import{O as $,r as s,U as E,Q as A,j as e,L as O,F as f,R as L,$ as M,u as U,a as h,T as H}from"./index-f035c361.js";import{C as R,S as V,V as W}from"./CurrentClassses-b26d6195.js";function P({login:r}){const o=$(),[l,i]=s.useState(!1),[a,p]=s.useState("winter"),[u,g]=s.useState([]),[j,w]=s.useState({}),[v,C]=s.useState(),[b,S]=s.useState(!1),[k,N]=s.useState([]),[x,y]=s.useState(null),{user:n}=s.useContext(E);async function m(t,c){try{const d=await fetch(t);if(!d.ok)throw new Error("Network response was not ok");const F=await d.json();c(F)}catch(d){console.log(d)}}s.useEffect(()=>{r&&(n?A(n.uid,t=>{y({uid:n.uid,schedules:t.val()})},"schedules"):o("/"))},[n,r,o]),s.useEffect(()=>{const t=a==="fall"?"":"winter-";m(`/me-schedule-maker/data/${t}all.json`,g).catch(c=>console.log(c)),m(`/me-schedule-maker/data/${t}data.json`,w).catch(c=>console.log(c))},[a]);async function D(){await M()}return e.jsxs(R.Provider,{value:{chosenClasses:k,setChosenClasses:N,hoveredClass:v,setHoveredClass:C},children:[e.jsxs("nav",{className:"md:text-base text-xs w-full bg-c9 text-c1 shrink-0 flex justify-between items-center",children:[e.jsx(O,{to:n?`../users/${n.uid}`:"/",children:e.jsx(f,{icon:L,className:"ml-2 cursor-pointer transition hover:text-c4"})}),e.jsxs("div",{className:"flex gap-2",children:[a==="fall"?"Fall":"Winter"," 2023 JAC"," ",e.jsx("span",{className:" max-md:hidden",children:"Mock Schedule Maker"}),e.jsx(z,{show:l,handleClick:()=>i(t=>!t),current:a,setCurrent:p})]}),e.jsx("p",{onClick:()=>void D(),className:"mr-2 cursor-pointer transition hover:text-c4",children:x?"Sign Out":""})]}),e.jsxs("section",{className:"w-full basis-full bg-c9 md:grid md:grid-cols-12 md:grid-rows-6 box-border gap-2 px-2 pb-2 text-c9 flex flex-col md:text-base text-xs overflow-auto",children:[e.jsx(V,{classes:u,setLoading:S,userData:x,aucmpData:j}),b&&u.length!==0&&e.jsx(e.Fragment,{children:e.jsx(W,{})})]})]})}function z({show:r,handleClick:o,current:l,setCurrent:i}){const a=U({rotate:r?180:0,y:r?"0%":"-200%"});return e.jsxs(e.Fragment,{children:[e.jsx(h.div,{style:{rotate:a.rotate},children:e.jsx(f,{icon:H,onClick:o,className:"cursor-pointer"})}),e.jsxs(h.div,{style:{y:a.y},className:"absolute md:top-6 top-4 z-10 text-c1 bg-c9 [&>p]:p-1 [&>p]:cursor-pointer",children:[e.jsx("p",{className:`${l==="fall"?"bg-c8":""} hover:font-bold transition`,onClick:()=>{i("fall"),o()},children:"Fall 2023"}),e.jsx("p",{className:`${l==="winter"?"bg-c8":""} hover:font-bold transition`,onClick:()=>{i("winter"),o()},children:"Winter 2023"})]})]})}export{P as default};
